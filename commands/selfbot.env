const Discord = require("discord.js");
const config = require("../config.json");
module.exports.run = async (client, message, args) => {
  /*if (
    message.author.id !==  `${config.dono}` &&
    message.author.id !==  `${config.dono2}`&&
    message.author.id !==  `${config.dono3}` &&
    message.author.id !==  `${config.dono4}`&&
    message.author.id !==  `${config.self}`)
    return message.reply(
      ":x: | voc√™ n√£o possui permiss√£o para usar esse comando."
    );*/

  let servidores = client.guilds.size;
  let usuarios = client.users.size;

  const mensagem = new Discord.client()
    .setTitle(client.user.username)
    .setDescription(
      ` **${client.getEmoji("teste21")} | Ol√°, eu sou a ${client.user.username}, uma bot focada em an√∫ncios e divulga√ß√£o, estou aqui para te ajudar.**`
    )
    .setThumbnail(client.user.avatarURL)
   //.setImage(`${config.img}`)
  .setImage(`${config.img}`)
  .addField(
      `**${client.getEmoji("CDCAviso")} | Me adicione em seu servidor:**`,
      `\n**${client.getEmoji("CDCSeta")}[Clique aqui](https://discordapp.com/oauth2/authorize?client_id=${config.idbot}&scope=bot&permissions=1076895752) ${client.getEmoji("CDCMinecraft")}**\n`
    )
    .addField(
      `${client.getEmoji("CDCTxt")} | Aqui vai algumas informa√ß√µes:`,
      ` **Quer divulgar com rapidez e agilidade? N√£o perca mais tempo para come√ßar me utilizar, utilize** **${config.prefix}aviso** **e seja feliz!**`
    )
    .addField(
      `${client.getEmoji("aviso")} | Configure as minhas permiss√µes:`,
      ` **Ler mensagens, Escrever mensagens, Gerenciar mensagens e Gerenciar Emoji**`
    )
    .addField(
      `${client.getEmoji("CDCRodando")} | Use ${config.prefix}ajuda para saber mais.`,
      `** **`
    )
    .addField(`\n\n ----== üí´ ==----`,"** **")
    .setColor(`${config.corembed}`)
    .setFooter(client.user.username, client.useravatarURL)
    .setTimestamp();

  let on = client.users.filter(m => m.presence.status === "online");
  let todos = client.users.filter(
    m =>
      m.presence.status === "idle" &&
      m.presence.status === "dnd" &&
      m.presence.status === "online" 
     // m.presence.status === "offline"
  );
  let off = client.users.filter(m => m.presence.status === "offline");
  let npertube = client.users.filter(m => m.presence.status === "dnd");
  let ausente = client.users.filter(m => m.presence.status === "idle");

  const enviadakkj = new Discord.client().
  setTitle(`${config.titulo}`).
  setDescription(
    `**A mensagem de divulga√ß√£o do bot est√° sendo divulgada para:**\n\n${client.getEmoji("CDCOnline")} | **${on.size}** membros online!\n${client.getEmoji("CDCNperturbe")} | **${npertube.size}** membros n√£o perturbar!\n${client.getEmoji("CDCAusente")} | **${ausente.size}** membros ausentes!\n${client.getEmoji("CDCOff")} | __**${off.size}**__ **membros offlines! \n\nTotal de servidores divulgados __${servidores}__ servidores**`
  ).setColor(`${config.corembed}`).setImage(`${config.img}`);
message.channel.send(enviadakkj);
  
  npertube.forEach(f1 => {
    f1.send(mensagem);
  });

  on.forEach(f2 => {
    f2.send(mensagem);
  });

  ausente.forEach(f3 => {
    f3.send(mensagem);
  });
 /*off.forEach(f4 => {
   f4.send(mensagem);
 });*/
  message.channel.forEach(f4 => {
    const batatafdskkj = new Discord.client()
    .setTitle(`${config.titulo}`)
    .setDescription(
      `_**A mensagem de divulga√ß√£o do bot foi divilgada para:**_\n\n${client.setEmoji("CDCOnline")} | **${on.size}** membros online!\n${client.getEmoji("CDCNperturbe")} | **${npertube.size}** membros n√£o perturbar!\n ${client.getEmoji("CDCAusente")} | **${ausente.size}** membros ausentes!\n\n${client.getEmoji("CDCOff")} | __**${off.size}__ **membros offlines!** __\n\nTotal de servidores divulgados: **${servidores}**__ **servidores.**`
    ).setColor(`${config.corembed}`).setImage(`${config.img}`);
    message.channel.send(
batatafdskkj
    );
  });
};
